<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../t-text-container/travel-element-styles.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">
<link rel="import" href="../juicy-html/juicy-html.html">
<link rel="import" href="../t-carousel/t-image-carousel.html">
<!--
A comment describing this element

Example:

    <t-activity-summary></t-activity-summary>

Example:

    <t-activity-summary>
    </t-activity-summary>

@demo demo/index.html
-->

<dom-module id="t-activity-summary">
    <template>
        <style include="iron-flex"></style>
        <style include="travel-element-styles">
            :host {
                display: block;
                font-family: var(--header-font-family, --primary-font-family);
                font-size: var(--font-14, 14px);
            }
            .image {
                display: block;
            }
            .category-container {
                position: relative;
            }
            .category {
                max-width: 80%;
                color: var(--option-list-category-color, #fff);
                position: absolute;
                bottom: 0;
                left: 0;
                padding: 10px;
            }
        </style>
        <div class="category-container">
            <t-image-carousel 
                id="image-carousel"
                light-box
                sizing="cover"
                auto-slide-interval="300000"
                loading-icon="[[activityIcon]]"
                height="220">
            </t-image-carousel>
            <template is="dom-if" if="[[!photoUrls.length]]">
                <t-image loading-icon="[[activityIcon]]" sizing="cover" class="border-bottom image" height="220"></t-image>
            </template>
            <div class="category font-14">[[category]]</div>
        </div>
        <div class="section-small">
            <div class="layout horizontal center" on-tap="_toggleDesc">
                <div class="flex primary-text font-semi">
                    DESCRIPTION
                </div>
                <iron-icon class="secondary-text text-right" id="collapseIcon" icon="[[collapseIcon.expand]]"></iron-icon>
            </div>
            <iron-collapse id="collapse">
                <div class="secondary-text">
                    <template is="juicy-html"
                              content$="[[description]]">
                    </template>
                </div>
            </iron-collapse>
        </div>
    </template>
    <script>
        (function () {

            'use strict'

			Polymer({

				is: 't-activity-summary',

				properties: {

	                /*
	                 * <p>This holds the value of default image icon</p>
	                 */
	                activityIcon: {
	                    type: String,
	                    value: 'places:pool'
	                },

	                /**
	                 * Description property displayed in juicy html template
	                 * It can have html template in it
	                */
					description: {
						type: String
					},

	                /**
	                 * Array of photo URLs
	                */
					photoUrls: {
						type: Array
					},

	                /**
	                 * Stores possible values of collapse icons.
	                */
	                collapseIcon: {
	                    type: Object,
	                    value: function() {
	                        return {
	                            expand: 'icons:expand-more',
	                            collapse: 'icons:expand-less'
	                        };
	                    }
	                }
				},
				observers: ['_setCarouselData(photoUrls)'],

				_setCarouselData: function(urls){
				    this.querySelector('#image-carousel').data = urls;
				},
                /**
                 * toggles collapse state
                */
                _toggleDesc: function() {
                    this.$.collapse.toggle();
                    var collapseIcon = this.$.collapseIcon;
                    collapseIcon.icon   = collapseIcon.icon === 'icons:expand-more'
                                        ? 'icons:expand-less'
                                        : 'icons:expand-more';
                }
			});
		})();
    </script>
</dom-module>